---
  - hosts: all
    become: true
  
    tasks:
      - name: download apache maven
        get_url: url=https://dlcdn.apache.org/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.tar.gz dest=/tmp/apache-maven-3.8.4-bin.tar.gz
  
      - name: untar maven
        shell: chdir=/tmp creates=/opt/apache-maven-3.8.4 tar -zxf apache-maven-3.8.4-bin.tar.gz -C /opt
  
      - name: add maven to PATH
        shell: cat /etc/profile | grep "/opt/apache-maven-3.8.4/bin" || echo "PATH=/opt/apache-maven-3.8.4/bin:$PATH" >> /etc/profile
  
      - name: copy settings.xml
        copy:
          src: /opt/ansible/install-maven/settings.xml
          dest: /opt/apache-maven-3.8.4/conf/settings.xml
          mode: 0666
          backup: yes